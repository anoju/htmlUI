<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>openweathermap</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.1.1/normalize.min.css" />
<style>
h1 {
  text-align: center;
}
a {
  text-decoration: none;
}
.area {
  display: flex;
  align-items: center;
  padding: 40px;
  background: #ddd;
  color: #fff;
}
.area.bg1 {
  background-color: blue;
}
.area.bg2 {
  background-color: green;
}
.area .left {
  flex-shrink: 0;
}
.area .right {
  flex: 1 1 auto;
  padding-left: 40px;
}
</style>
</head>
<body>
<h1><a href="https://openweathermap.org/" target="_blank">openweathermap</a></h1>
<div class="area bg1">
  <div class="left">
    <div class="weather_icon"></div>

    <div>
      <div class="dt">현재기온</div>
      <div class="dd _temp"></div>
    </div>
    <div class="_description"></div>
    <div class="_city"></div>
  </div>
  <div class="right">

    <ul class="list">
      <li>
        <div class="dt">최저기온</div>
        <div class="dd _temp_min"></div>
      </li>
      <li>
        <div class="dt">최고기온</div>
        <div class="dd _temp_max"></div>
      </li>
      <li>
        <div class="dt">습도</div>
        <div class="dd _humidity"></div>
      </li>
      <li>
        <div class="dt">바람</div>
        <div class="dd _wind"></div>
      </li>
      <li>
        <div class="dt">구름</div>
        <div class="dd _cloud"></div>
      </li>
    </ul>
  </div>
</div>
<div class="area bg2">
  <div class="left">
    <div class="weather_icon"></div>

    <div>
      <div class="dt">현재기온</div>
      <div class="dd _temp"></div>
    </div>
    <div class="_description"></div>
    <div class="_city"></div>
  </div>
  <div class="right">

    <ul class="list">
      <li>
        <div class="dt">최저기온</div>
        <div class="dd _temp_min"></div>
      </li>
      <li>
        <div class="dt">최고기온</div>
        <div class="dd _temp_max"></div>
      </li>
      <li>
        <div class="dt">습도</div>
        <div class="dd _humidity"></div>
      </li>
      <li>
        <div class="dt">바람</div>
        <div class="dd _wind"></div>
      </li>
      <li>
        <div class="dt">구름</div>
        <div class="dd _cloud"></div>
      </li>
    </ul>
  </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script defer src="https://use.fontawesome.com/releases/v5.15.2/js/all.js" integrity="sha384-vuFJ2JiSdUpXLKGK+tDteQZBqNlMwAjhZ3TvPaDfN9QmbPb7Q8qUpbSNapQev3YF" crossorigin="anonymous"></script>
<script>
var $key = '89fb8a243f9c6b021a9483e72bea6246';
var $area1 = 'seoul';
var $area2 = 'Gyeonggi-do';

// 날씨 api - fontawesome 아이콘
var weatherIcon = {
  '01': 'fas fa-sun',
  '02': 'fas fa-cloud-sun',
  '03': 'fas fa-cloud',
  '04': 'fas fa-cloud-meatball',
  '09': 'fas fa-cloud-sun-rain',
  '10': 'fas fa-cloud-showers-heavy',
  '11': 'fas fa-poo-storm',
  '13': 'far fa-snowflake',
  '50': 'fas fa-smog'
};

function setWeatherHtml(resp, wrap, city) {
  var $wrap = $(wrap);
  var $Icon = (resp.weather[0].icon).substr(0, 2);
  var $city = city;
  var $description = resp.weather[0].main;
  var $Temp = Math.floor(resp.main.temp - 273.15) + 'º';
  var $temp_min = Math.floor(resp.main.temp_min - 273.15) + 'º';
  var $temp_max = Math.floor(resp.main.temp_max - 273.15) + 'º';
  var $humidity = resp.main.humidity + ' %';
  var $wind = resp.wind.speed + ' m/s';
  var $cloud = resp.clouds.all + "%";

  $wrap.find('.weather_icon').append('<i class="' + weatherIcon[$Icon] + ' fa-5x" style="height : 150px; width : 150px;"></i>');
  $wrap.find('._temp').prepend($Temp);
  $wrap.find('._city').append($city);
  $wrap.find('._description').prepend($description);
  $wrap.find('._temp_min').append($temp_min);
  $wrap.find('._temp_max').append($temp_max);
  $wrap.find('._humidity').append($humidity);
  $wrap.find('._wind').append($wind);
  $wrap.find('._cloud').append($cloud);
}
// 날씨 api - 서울
var apiURI = "http://api.openweathermap.org/data/2.5/weather?q=" + $area1 + "&appid=" + $key;
$.ajax({
  url: apiURI,
  dataType: "json",
  type: "GET",
  async: "false",
  success: function(resp) {
    setWeatherHtml(resp, '.area.bg1', '서울');
  }
})



// 날씨 api - 경기도
var apiURI = "http://api.openweathermap.org/data/2.5/weather?q=" + $area2 + "&appid=" + $key;
$.ajax({
  url: apiURI,
  dataType: "json",
  type: "GET",
  async: "false",
  success: function(resp) {
    setWeatherHtml(resp, '.area.bg2', '경기도');
  }
})
</script>
</body>
</html>